# sql-5
PARTITION, ALWAYS GENERATED

**1.חלוקה לקבוצות:**
במשפט SQL זה, PARTITION BY מחלק את הנתונים לקבוצות (Partitons) לפי עמודה מסוימת, employee_id בדוגמה הזו. לאחר החלוקה לקבוצות, הפונקציה SUM מחשבת סיכום מצטבר (Running Total) לכל קבוצה בנפרד, תוך שמירה על הסדר לפי עמודת id.

מאפשר לבצע חישובים לכל קבוצה בנפרד, תוך שימוש בנתונים המלאים.
שימוש בפונקציות חלון (Window Functions):
מספק דרך פשוטה לחשב ערכים כמו סכום מצטבר, ממוצע, מינימום, מקסימום, ודירוג בתוך כל קבוצה.

**2. מה עושה הקוד?**
הקוד יוצר טבלה בשם products שבה עמודה אחת, details, מסוג JSONB.
לאחר מכן, מוסיף לטבלה נתונים בפורמט JSON על מוצרים (לפטופ וטלפון).
לבסוף, מבוצעת שאילתה לשליפת ערכים ספציפיים מתוך העמודה details.
details: שדה שבו נשמרים הנתונים בפורמט JSONB.
כל ערך JSON מתאר מוצר:
name: שם המוצר.
price: מחיר המוצר.
features: תכונות כמו RAM ו-Storage.
**
**3. מה עושה הקוד?****
הקוד יוצר טבלה בשם array_example שבה עמודת numbers מסוג מערך (ARRAY) של מספרים שלמים (INT[]).
הקוד מבצע שתי שאילתות:

שליפה של האלמנט הראשון בכל מערך.
מציאת שורות שבהן המערך מכיל את המספר 3.


****שימושים נפוצים במערכים:**
****אחסון נתונים מרובים בעמודה אחת:**

מערכים מאפשרים לשמור רשימה של ערכים בעמודה יחידה (כמו תגיות, מזהים, ערכים קשורים).
חיפושים בתוך מערך:

שימוש בפונקציות כמו ANY, ALL, או אינדקסים של מערכים.
שליפת נתונים ספציפיים:

שימוש באינדקסים כדי לגשת לערכים בודדים במערך.

**4.יתרונות של עמודות מחושבות (Generated Columns):
אוטומציה:**

אין צורך להזין ערכים ידנית לעמודת tax.
החישוב מתבצע אוטומטית בהתבסס על עמודת price.
עקביות:

מובטחת עקביות בחישובים, שכן הערך תמיד נגזר מהנוסחה.
שיפור ביצועים:

אם העמודה מוגדרת כ-STORED, הערך המחושב נשמר פיזית בטבלה, מה שמאיץ שאילתות.
פשטות קוד:

מונע חזרות על חישובים מורכבים בשאילתות.

שימושים נפוצים:
חישובי מס (Tax Calculations).
הנחות או מחירים אחרי מע"מ.
שדות חישוביים אחרים כמו רווחים, אחוזי רווח, וכו'.




